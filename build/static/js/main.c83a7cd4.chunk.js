(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,a){e.exports=a(83)},45:function(e,t,a){},51:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(16),s=a.n(o),i=(a(45),a(2)),c=a(12),r=a(9);a(51);var p=a(13),m=a.n(p);const d=()=>e=>{m.a.get("http://localhost:4001/api/installation").then(e=>e.data).then(t=>e({type:"FETCH_ALL_INSTALLATION",payload:t}))};a(69);class u extends n.Component{componentWillMount(){this.props.getCodePostal(),this.props.getVille()}render(){const e=this.props.villes.map((e,t)=>l.a.createElement("option",{key:t,value:e},e)),t=this.props.code_postal.map((e,t)=>l.a.createElement("option",{key:t,value:e},e));return l.a.createElement("div",null,l.a.createElement("form",{className:"search-form"},l.a.createElement("label",{htmlFor:"Ville"},"Ville : "),l.a.createElement("select",{className:"custom-select col-sm-2",id:"Ville",onChange:e=>this.props.selectByVille(e.target.value)},e),l.a.createElement("label",{htmlFor:"code_postal"},"Code Postal : "),l.a.createElement("select",{className:"custom-select col-sm-2",id:"code_postal",onChange:e=>this.props.selectByCode(e.target.value)},t),l.a.createElement("button",{className:"btn btn-secondary",onClick:e=>this.props.fetchAllInstallation()},"Reset")))}}var h=Object(i.b)(e=>({code_postal:e.fetch.code_postaux,villes:e.fetch.villes}),{getCodePostal:()=>e=>{m.a.get("http://localhost:4001/api/installation/code").then(e=>e.data).then(t=>e({type:"GET_CODE_POSTAL",payload:t}))},selectByCode:e=>t=>{t({type:"SELECT_BY_CODE_POSTAL",payload:e})},fetchAllInstallation:d,selectByVille:e=>t=>{t({type:"SELECT_BY_VILLE",payload:e})},getVille:()=>e=>{m.a.get("http://localhost:4001/api/installation/ville").then(e=>e.data).then(t=>e({type:"GET_VILLE",data:t}))}})(u);class E extends l.a.Component{componentWillMount(){this.props.fetchAllInstallation()}render(){const e=this.props.installations.map((e,t)=>l.a.createElement("tr",{className:"table-dark",key:t,onClick:t=>this.props.setCodeInstallation(e.noDeLInstallation)},l.a.createElement("td",null,l.a.createElement(c.b,{to:"/installation/".concat(e.noDeLInstallation)},e.nomUsuelDeLInstallation)),l.a.createElement("td",null,e.codePostal),l.a.createElement("td",null,e.nomDeLaCommune)));return l.a.createElement("div",{style:{height:"82vh",width:"100vh",overflow:"auto"},className:"tableau"},l.a.createElement("table",{className:"table table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",{className:"thead-dark table-bordered"},l.a.createElement("th",null,"Nom de l'installation"),l.a.createElement("th",null,"Code Postal"),l.a.createElement("th",null,"Ville"))),l.a.createElement("tbody",null,e)))}}var y=Object(r.e)(Object(i.b)(e=>({installations:e.fetch.installations}),{fetchAllInstallation:d,setCodeInstallation:e=>t=>{t({type:"SET_CODE_INSTALLATION",payload:e})}})(E)),C=a(17),v=a.n(C);class _ extends n.Component{componentDidMount(){const e=new v.a.Map({container:this.containerMap,style:"mapbox://styles/mapbox/streets-v11",center:[-1.8158,47.278],zoom:7}),t=[];var a=!0,n=!1,l=void 0;try{for(var o,s=this.props.installations[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){let e=o.value;if(""!==e.localisation){let a=e.localisation.split(",");t.push({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(a[1]),parseFloat(a[0])]}})}}}catch(i){n=!0,l=i}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}e.on("load",()=>{e.addSource("point",{type:"geojson",data:{type:"FeatureCollection",features:t}}),e.loadImage("https://img.icons8.com/metro/52/000000/marker.png",(t,a)=>{if(t)throw t;e.addImage("map-marker",a)}),e.addLayer({id:"points",type:"symbol",source:"point",layout:{"icon-image":"map-marker","icon-size":.25}})})}render(){return l.a.createElement("div",{ref:e=>this.containerMap=e,style:{width:"100vh",height:"82vh",paddingLeft:"3vh",borderRadius:"10px"}})}}var b=Object(i.b)(e=>({installations:e.fetch.installations,dataChange:e.fetch.dataChange}),{fetchAllInstallation:d})(_);a(71);class f extends l.a.Component{render(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Installations Sportives en Loire-Atlantique"),l.a.createElement(h,null),l.a.createElement("div",{className:"container"},l.a.createElement(y,null),l.a.createElement(b,null)))}}var I=f,T=a(8),O=a(6);const g={installations:[],equipements:[],activites:[],installation:[],code_installation:"",code_equipement:"",code_postaux:[],villes:[],activiteChargee:!1,dataChange:!1};var L=function(e=g,t){switch(t.type){case"FETCH_ALL_INSTALLATION":return Object(O.a)({},e,{installations:t.payload});case"FETCH_CODE_INSTALLATION":return Object(O.a)({},e,{installation:e.installations.filter(e=>parseInt(e.noDeLInstallation)===parseInt(t.payload)),activiteChargee:!1,activites:[],code_equipement:"",dataChange:!1});case"FETCH_CODE_EQUIPEMENT":return Object(O.a)({},e,{equipements:t.payload});case"FETCH_CODE_ACTIVITE":return Object(O.a)({},e,{activites:t.payload,activiteChargee:!0});case"SET_CODE_INSTALLATION":return Object(O.a)({},e,{code_installation:t.payload});case"SET_CODE_EQUIPEMENT":return Object(O.a)({},e,{code_equipement:t.payload,activiteChargee:!1});case"GET_CODE_POSTAL":return Object(O.a)({},e,{code_postaux:t.payload});case"SELECT_BY_CODE_POSTAL":return Object(O.a)({},e,{installations:e.installations.filter(e=>parseInt(e.codePostal)===parseInt(t.payload)),dataChange:!0});case"GET_VILLE":return Object(O.a)({},e,{villes:t.data});case"SELECT_BY_VILLE":return Object(O.a)({},e,{installations:e.installations.filter(e=>e.nomDeLaCommune===t.payload)});default:return e}},N=Object(T.c)({fetch:L}),A=a(38);var S=a(39),D=a.n(S);const q=(()=>{try{const e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(e){return}})(),j=[A.a],k=Object(T.e)(N,q,Object(T.d)(Object(T.a)(...j)));k.subscribe(D()(()=>{(e=>{try{const t=JSON.stringify(e);localStorage.setItem("state",t)}catch(t){}})(k.getState())},1e3));var x=k;class B extends n.Component{componentWillMount(){this.props.fetchInstallationByCodeInstallation(this.props.code_installation)}render(){const e={listStyle:"none"},t={display:"flex",justifyContent:"center",alignContent:"center"},a=this.props.installation.map(a=>l.a.createElement("div",{key:1},l.a.createElement("h3",null,a.nomUsuelDeLInstallation),l.a.createElement("p",null,"Code postal : ",a.codePostal),l.a.createElement("p",null,"Departement : ",a.departement),l.a.createElement("p",null,"Nom de la commune : ",a.nomDeLaCommune),l.a.createElement("p",null,"Adresse : ",a.nomVoie),l.a.createElement("div",{style:t},"Dessertes possibles :",l.a.createElement("ul",{style:e},l.a.createElement("li",null,"Bus : ",a.desserteBus),l.a.createElement("li",null,"Train : ",a.desserteTrain),l.a.createElement("li",null,"Metro : ",a.desserteMetro)))));return l.a.createElement("div",null,l.a.createElement("h1",null,"Informations suppl\xe9mentaires sur l'installation"),l.a.createElement("div",{style:t},a))}}var M=Object(i.b)(e=>({installation:e.fetch.installation,code_installation:e.fetch.code_installation}),{fetchInstallationByCodeInstallation:e=>t=>{t({type:"FETCH_CODE_INSTALLATION",payload:e})}})(B);a(81);class P extends n.Component{componentWillMount(){this.props.fetchEquipementByCode(this.props.code_installation)}render(){const e=this.props.equipements.map((e,t)=>l.a.createElement("p",{key:t,onClick:t=>this.props.setCodeEquipement(e.numeroDeLaFicheEquipement)},e.equipement));return l.a.createElement("div",null,l.a.createElement("h3",null,"Equipements disponibles sur le site :"),l.a.createElement("div",{className:"equipements"},e))}}var F=Object(i.b)(e=>({equipements:e.fetch.equipements,code_installation:e.fetch.code_installation}),{fetchEquipementByCode:e=>t=>{m.a.get("http://localhost:4001/api/equipement/installation/".concat(e)).then(e=>e.data).then(e=>t({type:"FETCH_CODE_EQUIPEMENT",payload:e}))},setCodeEquipement:e=>t=>{t({type:"SET_CODE_EQUIPEMENT",payload:e})}})(P);class V extends n.Component{componentWillMount(){console.log(this.props.code_equipement),""!==this.props.code_equipement&&this.props.fetchActivitesByCode(this.props.code_equipement)}componentDidUpdate(){""!==this.props.code_equipement&&!1===this.props.activiteChargee&&this.props.fetchActivitesByCode(this.props.code_equipement)}render(){if(void 0===this.props.activites)return null;{const e=this.props.activites.map((e,t)=>l.a.createElement("p",{key:t},e.activiteLibelle));return l.a.createElement("div",null,l.a.createElement("h3",null,"Activit\xe9s possibles sur cet equipement :"),l.a.createElement("div",null,e))}}}var w=Object(i.b)(e=>({activites:e.fetch.activites,code_equipement:e.fetch.code_equipement,activiteChargee:e.fetch.activiteChargee}),{fetchActivitesByCode:e=>t=>{m.a.get("http://localhost:4001/api/activite/equipement/".concat(e)).then(e=>e.data).then(e=>t({type:"FETCH_CODE_ACTIVITE",payload:e}))}})(V);a(82);class H extends n.Component{render(){return l.a.createElement("div",null,l.a.createElement(M,null),l.a.createElement("div",{className:"container-index"},l.a.createElement(F,null),l.a.createElement(w,null)),l.a.createElement(c.b,{to:"/"},l.a.createElement("button",{className:"btn btn-primary"},"Retour")))}}var U=H;class z extends n.Component{render(){return l.a.createElement(i.a,{store:x},l.a.createElement(c.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(r.a,{path:"/",exact:!0,component:I}),l.a.createElement(r.a,{path:"/installation/:id",component:U}))))}}var G=z;v.a.accessToken="pk.eyJ1IjoiZGlkaTM3IiwiYSI6ImNrODkyejgxYzAwcmQzZmw5cGpkZ25sb3MifQ.TltNRwSWcCerlffzzs35gg",s.a.render(l.a.createElement(G,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c83a7cd4.chunk.js.map